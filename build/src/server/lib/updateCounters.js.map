{"version":3,"file":"updateCounters.js","sourceRoot":"","sources":["../../../../src/server/lib/updateCounters.ts"],"names":[],"mappings":"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"}